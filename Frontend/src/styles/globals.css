/* Importar fontes - deve vir ANTES dos @tailwind */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Utility for hiding scrollbars */
@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Animation utilities */
  .animate-fadeIn {
    animation: fadeIn 0.2s ease-in-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Audio Recording Animations */
  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
      transform: scaleY(1);
    }
    50% {
      opacity: 0.5;
      transform: scaleY(0.6);
    }
  }

  .animate-audioWave {
    animation: pulse 0.8s ease-in-out infinite;
  }
}

/* Reset e base styles */
@layer base {
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    font-variant-ligatures: normal;
  }

  body {
    font-family:
      'Inter',
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      sans-serif;
    font-weight: 400;
    line-height: 1.5;
    color: theme('colors.gray.900');
    background-color: theme('colors.gray.50');
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* Dark mode */
  .dark body {
    color: theme('colors.gray.100');
    background-color: theme('colors.gray.900');
  }

  /* ✅ Mobile PWA - Keyboard behavior */
  /* Garantir que o layout se ajuste quando o teclado mobile aparecer */
  html,
  body {
    height: 100%;
    overflow: hidden;
  }

  /* ✅ Prevenir zoom automático em inputs no iOS (fonte mínima 16px) */
  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='number'],
  input[type='tel'],
  input[type='search'],
  input[type='url'],
  textarea,
  select {
    font-size: 16px !important;
    /* Usar transform para aparência menor mantendo 16px real */
  }

  /* ✅ Prevenir comportamentos indesejados de touch/zoom */
  * {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  /* ✅ Desabilitar zoom via gesture em toda a página */
  html {
    touch-action: pan-x pan-y;
    -ms-touch-action: pan-x pan-y;
  }

  /* Usar dvh (dynamic viewport height) para suportar teclado mobile */
  @supports (height: 100dvh) {
    html,
    body,
    #root {
      height: 100dvh;
    }
  }

  /* Fallback para navegadores antigos */
  @supports not (height: 100dvh) {
    html,
    body,
    #root {
      height: -webkit-fill-available;
      height: 100vh;
    }
  }

  /* Transição suave quando o viewport muda (teclado sobe/desce) */
  #root {
    display: flex;
    flex-direction: column;
    transition: height 0.2s ease-out;
  }

  /* Scrollbar customization */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: theme('colors.gray.100');
    border-radius: 4px;
  }

  .dark ::-webkit-scrollbar-track {
    background: theme('colors.gray.800');
  }

  ::-webkit-scrollbar-thumb {
    background: theme('colors.gray.400');
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: theme('colors.gray.500');
  }

  .dark ::-webkit-scrollbar-thumb {
    background: theme('colors.gray.600');
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: theme('colors.gray.500');
  }

  /* Focus styles */
  :focus {
    outline: 2px solid theme('colors.primary.500');
    outline-offset: 2px;
  }

  :focus:not(:focus-visible) {
    outline: none;
  }

  /* Selection */
  ::selection {
    background-color: theme('colors.primary.100');
    color: theme('colors.primary.900');
  }

  .dark ::selection {
    background-color: theme('colors.primary.900');
    color: theme('colors.primary.100');
  }
}

/* Components layer */
@layer components {
  /* Button base styles */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 active:bg-primary-700;
  }

  .btn-secondary {
    @apply bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600;
  }

  .btn-success {
    @apply bg-success-500 text-white hover:bg-success-600 focus:ring-success-500;
  }

  .btn-danger {
    @apply bg-danger-500 text-white hover:bg-danger-600 focus:ring-danger-500;
  }

  .btn-warning {
    @apply bg-warning-500 text-white hover:bg-warning-600 focus:ring-warning-500;
  }

  .btn-ghost {
    @apply text-gray-700 hover:bg-gray-100 focus:ring-gray-500 dark:text-gray-300 dark:hover:bg-gray-700;
  }

  /* Input base styles */
  .input {
    @apply block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-500;
  }

  .input-error {
    @apply border-danger-300 focus:ring-danger-500 focus:border-danger-500;
  }

  /* Card styles */
  .card {
    @apply bg-white rounded-xl border border-gray-200 shadow-soft dark:bg-gray-800 dark:border-gray-700;
  }

  .card-header {
    @apply px-6 py-4 border-b border-gray-200 dark:border-gray-700;
  }

  .card-body {
    @apply px-6 py-4;
  }

  .card-footer {
    @apply px-6 py-4 border-t border-gray-200 dark:border-gray-700;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-100;
  }

  .badge-success {
    @apply bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-100;
  }

  .badge-danger {
    @apply bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-100;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-100;
  }

  .badge-gray {
    @apply bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300;
  }

  /* Loading spinner */
  .spinner {
    @apply animate-spin rounded-full border-2 border-gray-300 border-t-primary-500;
  }

  /* Toast/Alert styles */
  .alert {
    @apply p-4 rounded-lg border;
  }

  .alert-success {
    @apply bg-success-50 border-success-200 text-success-800 dark:bg-success-900 dark:border-success-700 dark:text-success-100;
  }

  .alert-danger {
    @apply bg-danger-50 border-danger-200 text-danger-800 dark:bg-danger-900 dark:border-danger-700 dark:text-danger-100;
  }

  .alert-warning {
    @apply bg-warning-50 border-warning-200 text-warning-800 dark:bg-warning-900 dark:border-warning-700 dark:text-warning-100;
  }

  .alert-info {
    @apply bg-primary-50 border-primary-200 text-primary-800 dark:bg-primary-900 dark:border-primary-700 dark:text-primary-100;
  }

  /* Animation classes */
  .fade-enter {
    @apply opacity-0;
  }

  .fade-enter-active {
    @apply opacity-100 transition-opacity duration-300;
  }

  .fade-exit {
    @apply opacity-100;
  }

  .fade-exit-active {
    @apply opacity-0 transition-opacity duration-300;
  }

  /* Utility classes for crypto data */
  .price-up {
    @apply text-success-600 dark:text-success-400;
  }

  .price-down {
    @apply text-danger-600 dark:text-danger-400;
  }

  .price-neutral {
    @apply text-gray-600 dark:text-gray-400;
  }

  /* Skeleton loading */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded dark:bg-gray-700;
  }

  .skeleton-text {
    @apply skeleton h-4 w-full;
  }

  .skeleton-avatar {
    @apply skeleton h-10 w-10 rounded-full;
  }

  /* Custom scrollbar for chat */
  .chat-scroll::-webkit-scrollbar {
    width: 4px;
  }

  .chat-scroll::-webkit-scrollbar-track {
    background: transparent;
  }

  .chat-scroll::-webkit-scrollbar-thumb {
    background: theme('colors.gray.300');
    border-radius: 2px;
  }

  .dark .chat-scroll::-webkit-scrollbar-thumb {
    background: theme('colors.gray.600');
  }
}

/* Utilities layer */
@layer utilities {
  .text-gradient {
    background: linear-gradient(135deg, theme('colors.primary.600'), theme('colors.primary.400'));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .bg-gradient-primary {
    background: linear-gradient(135deg, theme('colors.primary.600'), theme('colors.primary.400'));
  }

  .bg-gradient-success {
    background: linear-gradient(135deg, theme('colors.success.600'), theme('colors.success.400'));
  }

  .bg-gradient-danger {
    background: linear-gradient(135deg, theme('colors.danger.600'), theme('colors.danger.400'));
  }

  /* Safe area for mobile */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Hide scrollbar but keep functionality */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Glassmorphism effect */
  .glass {
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .dark .glass {
    background: rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
}

/* Print styles */
@media print {
  * {
    background: transparent !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  a,
  a:visited {
    text-decoration: underline;
  }

  abbr[title]:after {
    content: ' (' attr(title) ')';
  }

  pre,
  blockquote {
    border: 1px solid #999;
    page-break-inside: avoid;
  }

  thead {
    display: table-header-group;
  }

  tr,
  img {
    page-break-inside: avoid;
  }

  img {
    max-width: 100% !important;
  }

  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3;
  }

  h2,
  h3 {
    page-break-after: avoid;
  }
}
