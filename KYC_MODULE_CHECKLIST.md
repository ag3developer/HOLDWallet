# ğŸ“‹ KYC MODULE CHECKLIST - HOLDWallet

## ğŸ“Š Status Geral: **~25% Completo**

```
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 25%
```

---

## ğŸ” IMPORTANTE: KYC Ã‰ OBRIGATÃ“RIO EM TODOS OS SERVIÃ‡OS

O mÃ³dulo KYC deve ser **integrado e validado** em todos os serviÃ§os da WolkNow para garantir compliance regulatÃ³rio (BACEN, CVM, LGPD, AML/CFT).

### ServiÃ§os que Exigem KYC

| ServiÃ§o                          | NÃ­vel MÃ­nimo  | Limite sem KYC | Com KYC BÃ¡sico | Com KYC AvanÃ§ado |
| -------------------------------- | ------------- | -------------- | -------------- | ---------------- |
| **Instant Trade (Compra/Venda)** | BÃ¡sico        | R$ 0           | R$ 10.000/mÃªs  | R$ 300.000/mÃªs   |
| **WolkPay (Receber Pagamentos)** | IntermediÃ¡rio | R$ 0           | R$ 15.000/op   | R$ 50.000/op     |
| **P2P Trading**                  | BÃ¡sico        | R$ 500/mÃªs     | R$ 50.000/mÃªs  | Sem limite       |
| **Saque Crypto**                 | BÃ¡sico        | R$ 1.000/dia   | R$ 10.000/dia  | R$ 100.000/dia   |
| **DepÃ³sito Crypto**              | Nenhum        | Sem limite     | Sem limite     | Sem limite       |
| **TransferÃªncia Interna**        | BÃ¡sico        | R$ 500/dia     | R$ 50.000/dia  | Sem limite       |
| **Saque PIX/TED**                | IntermediÃ¡rio | R$ 0           | R$ 10.000/dia  | R$ 100.000/dia   |

### ValidaÃ§Ãµes por ServiÃ§o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUXO DE VALIDAÃ‡ÃƒO KYC                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  UsuÃ¡rio tenta usar serviÃ§o                                         â”‚
â”‚           â”‚                                                         â”‚
â”‚           â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ Verificar nÃ­vel KYC â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚             â”‚                                                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚    â–¼                 â–¼              â–¼                               â”‚
â”‚ [Sem KYC]      [KYC BÃ¡sico]   [KYC AvanÃ§ado]                        â”‚
â”‚    â”‚                 â”‚              â”‚                               â”‚
â”‚    â–¼                 â–¼              â–¼                               â”‚
â”‚ Bloquear ou    Verificar      Permitir com                          â”‚
â”‚ Redirecionar   limites do     limites mÃ¡ximos                       â”‚
â”‚ para /kyc      nÃ­vel                                                â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Resumo Executivo

| Ãrea                         | Status        | Progresso |
| ---------------------------- | ------------- | --------- |
| **Frontend - PÃ¡gina KYC**    | ğŸŸ¡ Parcial    | 40%       |
| **Frontend - ServiÃ§os**      | ğŸ”´ NÃ£o existe | 0%        |
| **Backend - Modelo/Tabelas** | ğŸ”´ NÃ£o existe | 0%        |
| **Backend - ServiÃ§o KYC**    | ğŸ”´ NÃ£o existe | 0%        |
| **Backend - Router/API**     | ğŸ”´ NÃ£o existe | 0%        |
| **Admin - GestÃ£o KYC**       | ğŸ”´ NÃ£o existe | 5%        |
| **IntegraÃ§Ãµes Externas**     | ğŸ”´ NÃ£o existe | 0%        |
| **Armazenamento Documentos** | ğŸ”´ NÃ£o existe | 0%        |
| **NotificaÃ§Ãµes**             | ğŸŸ¡ Parcial    | 20%       |
| **IntegraÃ§Ã£o c/ ServiÃ§os**   | ğŸ”´ NÃ£o existe | 0%        |

---

## ğŸ—ï¸ ARQUITETURA TÃ‰CNICA DO MÃ“DULO KYC

### VisÃ£o Geral da Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ARQUITETURA KYC - WOLKNOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚   USUÃRIO   â”‚     â”‚    ADMIN    â”‚     â”‚   SISTEMA   â”‚                      â”‚
â”‚   â”‚  (Frontend) â”‚     â”‚  (Frontend) â”‚     â”‚  (Backend)  â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚          â”‚                   â”‚                   â”‚                              â”‚
â”‚          â–¼                   â–¼                   â–¼                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚                    API GATEWAY (FastAPI)                     â”‚              â”‚
â”‚   â”‚  /kyc/*  â”‚  /admin/kyc/*  â”‚  @require_kyc decorator         â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                              â”‚                                                  â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚          â–¼                   â–¼                   â–¼                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚ KYC Service â”‚     â”‚  S3 Service â”‚     â”‚ Validation  â”‚                      â”‚
â”‚   â”‚  (CRUD)     â”‚     â”‚  (Storage)  â”‚     â”‚  Services   â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚          â”‚                   â”‚                   â”‚                              â”‚
â”‚          â”‚                   â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚          â”‚                   â”‚         â–¼                   â–¼                   â”‚
â”‚          â”‚                   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚          â”‚                   â”‚   â”‚  SERPRO/  â”‚     â”‚  AWS      â”‚               â”‚
â”‚          â”‚                   â”‚   â”‚  BigData  â”‚     â”‚Rekognitionâ”‚               â”‚
â”‚          â”‚                   â”‚   â”‚  (CPF)    â”‚     â”‚  (Face)   â”‚               â”‚
â”‚          â”‚                   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚          â”‚                   â”‚                                                  â”‚
â”‚          â–¼                   â–¼                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚                    PostgreSQL Database                       â”‚              â”‚
â”‚   â”‚  kyc_verifications â”‚ kyc_documents â”‚ kyc_personal_data      â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Fluxo Completo de VerificaÃ§Ã£o KYC

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FLUXO DE VERIFICAÃ‡ÃƒO KYC                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                    â”‚
â”‚  ETAPA 1: INÃCIO                                                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                   â”‚
â”‚  UsuÃ¡rio â†’ POST /kyc/start                                                         â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â–¼                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚ Criar KYCVerification       â”‚                                                   â”‚
â”‚  â”‚ status = "pending"          â”‚                                                   â”‚
â”‚  â”‚ level = determinar pelo     â”‚                                                   â”‚
â”‚  â”‚         serviÃ§o solicitado  â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                 â”‚                                                                  â”‚
â”‚                 â–¼                                                                  â”‚
â”‚  ETAPA 2: DADOS PESSOAIS                                                           â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                           â”‚
â”‚  UsuÃ¡rio â†’ POST /kyc/personal-data                                                 â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â”œâ”€â”€â–º Validar CPF formato                                                 â”‚
â”‚           â”œâ”€â”€â–º Consultar SERPRO/BigData (async)                                    â”‚
â”‚           â”‚    â”œâ”€â”€ Nome confere? âœ“/âœ—                                               â”‚
â”‚           â”‚    â”œâ”€â”€ Data nascimento confere? âœ“/âœ—                                    â”‚
â”‚           â”‚    â””â”€â”€ SituaÃ§Ã£o cadastral regular? âœ“/âœ—                                 â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â””â”€â”€â–º Salvar KYCPersonalData                                              â”‚
â”‚                                                                                    â”‚
â”‚                 â”‚                                                                  â”‚
â”‚                 â–¼                                                                  â”‚
â”‚  ETAPA 3: UPLOAD DE DOCUMENTOS                                                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                     â”‚
â”‚  UsuÃ¡rio â†’ POST /kyc/documents (multipart/form-data)                               â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â”œâ”€â”€â–º Validar arquivo (tipo, tamanho, formato)                            â”‚
â”‚           â”œâ”€â”€â–º Gerar hash SHA256                                                   â”‚
â”‚           â”œâ”€â”€â–º Upload para S3 (bucket privado)                                     â”‚
â”‚           â”œâ”€â”€â–º OCR automÃ¡tico (AWS Textract)                                       â”‚
â”‚           â”‚    â””â”€â”€ Extrair: Nome, CPF, RG, Data Nasc.                              â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â””â”€â”€â–º Criar KYCDocument                                                   â”‚
â”‚                status = "pending"                                                  â”‚
â”‚                                                                                    â”‚
â”‚  Documentos requeridos por nÃ­vel:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ BÃ¡sico         â”‚ Selfie                               â”‚                        â”‚
â”‚  â”‚ IntermediÃ¡rio  â”‚ Selfie + RG/CNH (frente/verso)       â”‚                        â”‚
â”‚  â”‚ AvanÃ§ado       â”‚ + Comprovante EndereÃ§o + Renda       â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                                    â”‚
â”‚                 â”‚                                                                  â”‚
â”‚                 â–¼                                                                  â”‚
â”‚  ETAPA 4: SELFIE COM PROVA DE VIDA                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                 â”‚
â”‚  UsuÃ¡rio â†’ POST /kyc/documents (type=selfie)                                       â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â”œâ”€â”€â–º Liveness Detection (AWS Rekognition)                                â”‚
â”‚           â”‚    â””â”€â”€ Ã‰ uma pessoa real? (nÃ£o foto de foto)                           â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â”œâ”€â”€â–º Face Comparison                                                     â”‚
â”‚           â”‚    â””â”€â”€ Comparar selfie com foto do documento                           â”‚
â”‚           â”‚    â””â”€â”€ Similarity Score > 90%? âœ“/âœ—                                     â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â””â”€â”€â–º Salvar face_match_score no KYCDocument                              â”‚
â”‚                                                                                    â”‚
â”‚                 â”‚                                                                  â”‚
â”‚                 â–¼                                                                  â”‚
â”‚  ETAPA 5: SUBMISSÃƒO PARA ANÃLISE                                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚  UsuÃ¡rio â†’ POST /kyc/submit                                                        â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â”œâ”€â”€â–º Validar todos documentos enviados                                   â”‚
â”‚           â”œâ”€â”€â–º Validar dados pessoais completos                                    â”‚
â”‚           â”‚                                                                        â”‚
â”‚           â””â”€â”€â–º Atualizar KYCVerification                                           â”‚
â”‚                status = "submitted"                                                â”‚
â”‚                submitted_at = now()                                                â”‚
â”‚                                                                                    â”‚
â”‚           â””â”€â”€â–º Notificar Admin (email + push)                                      â”‚
â”‚                                                                                    â”‚
â”‚                 â”‚                                                                  â”‚
â”‚                 â–¼                                                                  â”‚
â”‚  ETAPA 6: ANÃLISE (AUTO ou MANUAL)                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                 â”‚
â”‚                                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚                    VERIFICAÃ‡ÃƒO AUTOMÃTICA                           â”‚          â”‚
â”‚  â”‚                                                                     â”‚          â”‚
â”‚  â”‚  Se TODOS os critÃ©rios abaixo forem atendidos:                     â”‚          â”‚
â”‚  â”‚  âœ“ CPF validado no SERPRO (nome e data conferem)                   â”‚          â”‚
â”‚  â”‚  âœ“ Face match score > 95%                                          â”‚          â”‚
â”‚  â”‚  âœ“ Liveness detection passou                                       â”‚          â”‚
â”‚  â”‚  âœ“ OCR extraiu dados corretamente                                  â”‚          â”‚
â”‚  â”‚  âœ“ NÃ£o estÃ¡ em lista restritiva (PEP, OFAC)                        â”‚          â”‚
â”‚  â”‚                                                                     â”‚          â”‚
â”‚  â”‚  â†’ AUTO-APROVAR KYC                                                 â”‚          â”‚
â”‚  â”‚    status = "approved"                                              â”‚          â”‚
â”‚  â”‚    reviewed_by = "system"                                           â”‚          â”‚
â”‚  â”‚                                                                     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚                    ANÃLISE MANUAL (Admin)                           â”‚          â”‚
â”‚  â”‚                                                                     â”‚          â”‚
â”‚  â”‚  Se qualquer critÃ©rio falhar â†’ Fila para revisÃ£o manual            â”‚          â”‚
â”‚  â”‚                                                                     â”‚          â”‚
â”‚  â”‚  Admin â†’ GET /admin/kyc/{id}                                        â”‚          â”‚
â”‚  â”‚         â”‚                                                           â”‚          â”‚
â”‚  â”‚         â”œâ”€â”€ Ver documentos (presigned URL do S3)                    â”‚          â”‚
â”‚  â”‚         â”œâ”€â”€ Ver dados pessoais                                      â”‚          â”‚
â”‚  â”‚         â”œâ”€â”€ Ver resultado SERPRO                                    â”‚          â”‚
â”‚  â”‚         â”œâ”€â”€ Ver face match score                                    â”‚          â”‚
â”‚  â”‚         â”‚                                                           â”‚          â”‚
â”‚  â”‚         â””â”€â”€ DECISÃƒO:                                                â”‚          â”‚
â”‚  â”‚              â”œâ”€â”€ POST /admin/kyc/{id}/approve                       â”‚          â”‚
â”‚  â”‚              â”œâ”€â”€ POST /admin/kyc/{id}/reject                        â”‚          â”‚
â”‚  â”‚              â””â”€â”€ POST /admin/kyc/{id}/request-documents             â”‚          â”‚
â”‚  â”‚                                                                     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                    â”‚
â”‚                 â”‚                                                                  â”‚
â”‚                 â–¼                                                                  â”‚
â”‚  ETAPA 7: RESULTADO                                                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                â”‚
â”‚                                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚   APROVADO   â”‚    â”‚   REJEITADO  â”‚    â”‚  DOCS ADICI- â”‚                         â”‚
â”‚  â”‚              â”‚    â”‚              â”‚    â”‚  ONAIS       â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚          â”‚                   â”‚                   â”‚                                 â”‚
â”‚          â–¼                   â–¼                   â–¼                                 â”‚
â”‚  â€¢ Email "KYC         â€¢ Email com         â€¢ Email listando                        â”‚
â”‚    Aprovado!"           motivo              docs necessÃ¡rios                       â”‚
â”‚  â€¢ Atualizar          â€¢ Pode tentar       â€¢ UsuÃ¡rio pode                          â”‚
â”‚    user.kyc_level       novamente em        reenviar                              â”‚
â”‚  â€¢ Liberar limites      30 dias           â€¢ Status volta                          â”‚
â”‚                                             para "pending"                         â”‚
â”‚                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Diagrama de Banco de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MODELO DE DADOS KYC                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                           users (existente)                              â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ id              UUID PK                                                  â”‚   â”‚
â”‚  â”‚ email           VARCHAR(100)                                             â”‚   â”‚
â”‚  â”‚ kyc_level       VARCHAR(20) DEFAULT 'none'  â† NOVO CAMPO                â”‚   â”‚
â”‚  â”‚ kyc_verified_at TIMESTAMP                   â† NOVO CAMPO                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                                  â”‚
â”‚                              â”‚ 1:N                                              â”‚
â”‚                              â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        kyc_verifications                                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ id                UUID PK                                                â”‚   â”‚
â”‚  â”‚ user_id           UUID FK â†’ users.id                                     â”‚   â”‚
â”‚  â”‚ status            ENUM('pending','submitted','under_review',             â”‚   â”‚
â”‚  â”‚                        'approved','rejected','expired')                  â”‚   â”‚
â”‚  â”‚ level             ENUM('basic','intermediate','advanced','premium')      â”‚   â”‚
â”‚  â”‚ submitted_at      TIMESTAMP                                              â”‚   â”‚
â”‚  â”‚ reviewed_at       TIMESTAMP                                              â”‚   â”‚
â”‚  â”‚ reviewed_by       UUID FK â†’ users.id (admin)                             â”‚   â”‚
â”‚  â”‚ rejection_reason  TEXT                                                   â”‚   â”‚
â”‚  â”‚ auto_approved     BOOLEAN DEFAULT FALSE                                  â”‚   â”‚
â”‚  â”‚ risk_score        DECIMAL(5,2)  -- 0.00 a 100.00                        â”‚   â”‚
â”‚  â”‚ expiration_date   DATE                                                   â”‚   â”‚
â”‚  â”‚ created_at        TIMESTAMP                                              â”‚   â”‚
â”‚  â”‚ updated_at        TIMESTAMP                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚              â”‚ 1:1           â”‚ 1:N           â”‚ 1:N                              â”‚
â”‚              â–¼               â–¼               â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚kyc_personal_   â”‚  â”‚ kyc_documents  â”‚  â”‚ kyc_audit_logs â”‚                    â”‚
â”‚  â”‚    data        â”‚  â”‚                â”‚  â”‚                â”‚                    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
â”‚  â”‚id         UUID â”‚  â”‚id         UUID â”‚  â”‚id         UUID â”‚                    â”‚
â”‚  â”‚verification_id â”‚  â”‚verification_id â”‚  â”‚verification_id â”‚                    â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚                    â”‚
â”‚  â”‚-- Pessoais --  â”‚  â”‚document_type   â”‚  â”‚actor_id   UUID â”‚                    â”‚
â”‚  â”‚full_name       â”‚  â”‚ ENUM:          â”‚  â”‚actor_type ENUM â”‚                    â”‚
â”‚  â”‚social_name     â”‚  â”‚ 'identity_     â”‚  â”‚action     TEXT â”‚                    â”‚
â”‚  â”‚birth_date      â”‚  â”‚  front'        â”‚  â”‚old_status TEXT â”‚                    â”‚
â”‚  â”‚nationality     â”‚  â”‚ 'identity_     â”‚  â”‚new_status TEXT â”‚                    â”‚
â”‚  â”‚                â”‚  â”‚  back'         â”‚  â”‚details    JSON â”‚                    â”‚
â”‚  â”‚-- Documento -- â”‚  â”‚ 'selfie'       â”‚  â”‚ip_address      â”‚                    â”‚
â”‚  â”‚document_type   â”‚  â”‚ 'address_      â”‚  â”‚user_agent      â”‚                    â”‚
â”‚  â”‚document_number â”‚  â”‚  proof'        â”‚  â”‚created_at      â”‚                    â”‚
â”‚  â”‚ (encrypted)    â”‚  â”‚ 'income_       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚  â”‚rg_number       â”‚  â”‚  proof'        â”‚                                        â”‚
â”‚  â”‚ (encrypted)    â”‚  â”‚                â”‚                                        â”‚
â”‚  â”‚                â”‚  â”‚file_path (S3)  â”‚                                        â”‚
â”‚  â”‚-- EndereÃ§o --  â”‚  â”‚file_hash       â”‚                                        â”‚
â”‚  â”‚zip_code        â”‚  â”‚original_name   â”‚                                        â”‚
â”‚  â”‚street          â”‚  â”‚mime_type       â”‚                                        â”‚
â”‚  â”‚number          â”‚  â”‚file_size       â”‚                                        â”‚
â”‚  â”‚complement      â”‚  â”‚                â”‚                                        â”‚
â”‚  â”‚neighborhood    â”‚  â”‚status ENUM     â”‚                                        â”‚
â”‚  â”‚city            â”‚  â”‚rejection_reasonâ”‚                                        â”‚
â”‚  â”‚state           â”‚  â”‚                â”‚                                        â”‚
â”‚  â”‚country         â”‚  â”‚-- OCR Data --  â”‚                                        â”‚
â”‚  â”‚                â”‚  â”‚ocr_data   JSON â”‚                                        â”‚
â”‚  â”‚-- Contato --   â”‚  â”‚ocr_confidence  â”‚                                        â”‚
â”‚  â”‚phone(encrypted)â”‚  â”‚                â”‚                                        â”‚
â”‚  â”‚email           â”‚  â”‚-- Face Match --â”‚                                        â”‚
â”‚  â”‚                â”‚  â”‚face_match_scoreâ”‚                                        â”‚
â”‚  â”‚-- Financeiro --â”‚  â”‚liveness_passed â”‚                                        â”‚
â”‚  â”‚occupation      â”‚  â”‚                â”‚                                        â”‚
â”‚  â”‚monthly_income  â”‚  â”‚uploaded_at     â”‚                                        â”‚
â”‚  â”‚source_of_funds â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚  â”‚                â”‚                                                             â”‚
â”‚  â”‚-- Compliance --â”‚                                                             â”‚
â”‚  â”‚pep    BOOLEAN  â”‚  -- Pessoa Politicamente Exposta                           â”‚
â”‚  â”‚fatca  BOOLEAN  â”‚  -- CidadÃ£o/residente EUA                                  â”‚
â”‚  â”‚                â”‚                                                             â”‚
â”‚  â”‚-- ValidaÃ§Ãµes --â”‚                                                             â”‚
â”‚  â”‚cpf_validated   â”‚                                                             â”‚
â”‚  â”‚cpf_valid_date  â”‚                                                             â”‚
â”‚  â”‚serpro_data JSONâ”‚                                                             â”‚
â”‚  â”‚                â”‚                                                             â”‚
â”‚  â”‚created_at      â”‚                                                             â”‚
â”‚  â”‚updated_at      â”‚                                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                             â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Arquitetura de ServiÃ§os (Backend)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CAMADAS DO BACKEND                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  CAMADA DE APRESENTAÃ‡ÃƒO (Routers)                                               â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                               â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ app/routers/kyc.py                    (Endpoints para usuÃ¡rio)         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ POST   /kyc/start              â†’ Inicia verificaÃ§Ã£o KYC                â”‚    â”‚
â”‚  â”‚ GET    /kyc/status             â†’ Status atual + documentos pendentes   â”‚    â”‚
â”‚  â”‚ POST   /kyc/personal-data      â†’ Salva dados pessoais                  â”‚    â”‚
â”‚  â”‚ POST   /kyc/documents          â†’ Upload de documento                   â”‚    â”‚
â”‚  â”‚ DELETE /kyc/documents/{id}     â†’ Remove documento                      â”‚    â”‚
â”‚  â”‚ POST   /kyc/submit             â†’ Submete para anÃ¡lise                  â”‚    â”‚
â”‚  â”‚ GET    /kyc/requirements/{lvl} â†’ Requisitos por nÃ­vel                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ app/routers/admin/kyc_admin.py        (Endpoints para admin)           â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ GET    /admin/kyc                    â†’ Lista verificaÃ§Ãµes pendentes    â”‚    â”‚
â”‚  â”‚ GET    /admin/kyc/stats              â†’ Dashboard estatÃ­sticas          â”‚    â”‚
â”‚  â”‚ GET    /admin/kyc/{id}               â†’ Detalhes de uma verificaÃ§Ã£o     â”‚    â”‚
â”‚  â”‚ GET    /admin/kyc/{id}/documents/{d} â†’ Presigned URL para documento    â”‚    â”‚
â”‚  â”‚ POST   /admin/kyc/{id}/approve       â†’ Aprovar KYC                     â”‚    â”‚
â”‚  â”‚ POST   /admin/kyc/{id}/reject        â†’ Rejeitar KYC                    â”‚    â”‚
â”‚  â”‚ POST   /admin/kyc/{id}/request-docs  â†’ Pedir documentos adicionais     â”‚    â”‚
â”‚  â”‚ GET    /admin/kyc/export             â†’ Exportar relatÃ³rio CSV/Excel    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  CAMADA DE NEGÃ“CIO (Services)                                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ app/services/kyc_service.py           (ServiÃ§o principal)              â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ class KYCService:                                                      â”‚    â”‚
â”‚  â”‚   def __init__(self, db: Session)                                      â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   # CriaÃ§Ã£o e consulta                                                 â”‚    â”‚
â”‚  â”‚   async def create_verification(user_id, level) â†’ KYCVerification      â”‚    â”‚
â”‚  â”‚   async def get_verification(user_id) â†’ KYCVerification | None         â”‚    â”‚
â”‚  â”‚   async def get_user_kyc_level(user_id) â†’ str                          â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   # Dados pessoais                                                     â”‚    â”‚
â”‚  â”‚   async def save_personal_data(verif_id, data) â†’ KYCPersonalData       â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   # Documentos                                                         â”‚    â”‚
â”‚  â”‚   async def upload_document(verif_id, file, type) â†’ KYCDocument        â”‚    â”‚
â”‚  â”‚   async def delete_document(doc_id) â†’ bool                             â”‚    â”‚
â”‚  â”‚   async def get_document_url(doc_id) â†’ str  (presigned)                â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   # SubmissÃ£o e anÃ¡lise                                                â”‚    â”‚
â”‚  â”‚   async def submit_for_review(verif_id) â†’ KYCVerification              â”‚    â”‚
â”‚  â”‚   async def auto_analyze(verif_id) â†’ AnalysisResult                    â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   # Admin                                                              â”‚    â”‚
â”‚  â”‚   async def approve(verif_id, admin_id, notes) â†’ KYCVerification       â”‚    â”‚
â”‚  â”‚   async def reject(verif_id, admin_id, reason) â†’ KYCVerification       â”‚    â”‚
â”‚  â”‚   async def request_documents(verif_id, docs_list) â†’ KYCVerification   â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   # VerificaÃ§Ã£o de limites                                             â”‚    â”‚
â”‚  â”‚   async def check_operation_limit(user_id, amount, service) â†’ bool     â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ app/services/serpro_service.py        (ValidaÃ§Ã£o CPF/CNPJ)             â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ class SerproService:                                                   â”‚    â”‚
â”‚  â”‚   async def validate_cpf(cpf, name, birth_date) â†’ ValidationResult     â”‚    â”‚
â”‚  â”‚   async def validate_cnpj(cnpj) â†’ ValidationResult                     â”‚    â”‚
â”‚  â”‚   async def get_person_data(cpf) â†’ PersonData                          â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ # Alternativa: BigDataCorpService                                      â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ app/services/face_recognition_service.py  (Reconhecimento Facial)      â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ class FaceRecognitionService:                                          â”‚    â”‚
â”‚  â”‚   async def compare_faces(selfie_path, doc_path) â†’ CompareResult       â”‚    â”‚
â”‚  â”‚   async def detect_liveness(selfie_path) â†’ LivenessResult              â”‚    â”‚
â”‚  â”‚   async def detect_faces(image_path) â†’ List[Face]                      â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ # Usa AWS Rekognition                                                  â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ app/services/ocr_service.py           (ExtraÃ§Ã£o de texto)              â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ class OCRService:                                                      â”‚    â”‚
â”‚  â”‚   async def extract_document_data(file_path) â†’ DocumentData            â”‚    â”‚
â”‚  â”‚   async def extract_id_card(file_path) â†’ IDCardData                    â”‚    â”‚
â”‚  â”‚   async def extract_address_proof(file_path) â†’ AddressData             â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ # Usa AWS Textract                                                     â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ app/services/s3_service.py            (Storage de arquivos)            â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ class S3Service:                                                       â”‚    â”‚
â”‚  â”‚   async def upload_file(file, path) â†’ str  (S3 URL)                    â”‚    â”‚
â”‚  â”‚   async def delete_file(path) â†’ bool                                   â”‚    â”‚
â”‚  â”‚   async def get_presigned_url(path, expires=3600) â†’ str                â”‚    â”‚
â”‚  â”‚   async def file_exists(path) â†’ bool                                   â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ # Bucket: wolknow-kyc-documents (privado, criptografado)               â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  CAMADA DE MIDDLEWARE                                                           â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                           â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ app/core/kyc_middleware.py            (Decorator @require_kyc)         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ @require_kyc(min_level="basic")                                        â”‚    â”‚
â”‚  â”‚ @require_kyc(min_level="intermediate")                                 â”‚    â”‚
â”‚  â”‚ @require_kyc(min_level="advanced")                                     â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ Verifica se usuÃ¡rio tem KYC no nÃ­vel mÃ­nimo exigido                    â”‚    â”‚
â”‚  â”‚ Se nÃ£o tiver â†’ HTTP 403 com redirect_url="/kyc"                        â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Arquitetura do Frontend

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ARQUITETURA FRONTEND KYC                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  PÃGINAS                                                                        â”‚
â”‚  â•â•â•â•â•â•â•                                                                        â”‚
â”‚                                                                                 â”‚
â”‚  src/pages/kyc/                                                                 â”‚
â”‚  â”œâ”€â”€ KYCPage.tsx              â† PÃ¡gina principal (wizard multi-step)            â”‚
â”‚  â”œâ”€â”€ KYCSuccessPage.tsx       â† PÃ¡gina de sucesso apÃ³s aprovaÃ§Ã£o                â”‚
â”‚  â””â”€â”€ KYCPendingPage.tsx       â† PÃ¡gina de "em anÃ¡lise"                          â”‚
â”‚                                                                                 â”‚
â”‚  src/pages/admin/                                                               â”‚
â”‚  â”œâ”€â”€ AdminKYCPage.tsx         â† Lista de KYCs pendentes                         â”‚
â”‚  â””â”€â”€ AdminKYCDetailPage.tsx   â† Detalhes + aprovar/rejeitar                     â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  COMPONENTES                                                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•                                                                   â”‚
â”‚                                                                                 â”‚
â”‚  src/components/kyc/                                                            â”‚
â”‚  â”œâ”€â”€ KYCStatusBadge.tsx       â† Badge: "KYC Verificado" / "Pendente"            â”‚
â”‚  â”œâ”€â”€ KYCProgressBar.tsx       â† Barra de progresso do wizard                    â”‚
â”‚  â”œâ”€â”€ KYCDocumentUploader.tsx  â† Upload com preview, progress, validaÃ§Ã£o         â”‚
â”‚  â”œâ”€â”€ KYCSelfieCapture.tsx     â† Captura de selfie via webcam                    â”‚
â”‚  â”œâ”€â”€ KYCDocumentPreview.tsx   â† Preview de documento enviado                    â”‚
â”‚  â”œâ”€â”€ KYCRequiredModal.tsx     â† Modal "Complete seu KYC para continuar"         â”‚
â”‚  â””â”€â”€ KYCLevelInfo.tsx         â† Info sobre nÃ­veis e benefÃ­cios                  â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  SERVIÃ‡OS                                                                       â”‚
â”‚  â•â•â•â•â•â•â•â•â•                                                                      â”‚
â”‚                                                                                 â”‚
â”‚  src/services/kyc.ts                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ export const kycService = {                                            â”‚    â”‚
â”‚  â”‚   startVerification: (level) => api.post('/kyc/start', { level }),     â”‚    â”‚
â”‚  â”‚   getStatus: () => api.get('/kyc/status'),                             â”‚    â”‚
â”‚  â”‚   savePersonalData: (data) => api.post('/kyc/personal-data', data),    â”‚    â”‚
â”‚  â”‚   uploadDocument: (file, type) => api.post('/kyc/documents', form),    â”‚    â”‚
â”‚  â”‚   deleteDocument: (id) => api.delete(`/kyc/documents/${id}`),          â”‚    â”‚
â”‚  â”‚   submit: () => api.post('/kyc/submit'),                               â”‚    â”‚
â”‚  â”‚   getRequirements: (level) => api.get(`/kyc/requirements/${level}`),   â”‚    â”‚
â”‚  â”‚ }                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  src/services/admin/adminKyc.ts                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ export const adminKycService = {                                       â”‚    â”‚
â”‚  â”‚   list: (filters) => api.get('/admin/kyc', { params: filters }),       â”‚    â”‚
â”‚  â”‚   getStats: () => api.get('/admin/kyc/stats'),                         â”‚    â”‚
â”‚  â”‚   getDetail: (id) => api.get(`/admin/kyc/${id}`),                      â”‚    â”‚
â”‚  â”‚   getDocumentUrl: (id, docId) => api.get(`/admin/kyc/${id}/doc/${d}`), â”‚    â”‚
â”‚  â”‚   approve: (id, notes) => api.post(`/admin/kyc/${id}/approve`),        â”‚    â”‚
â”‚  â”‚   reject: (id, reason) => api.post(`/admin/kyc/${id}/reject`),         â”‚    â”‚
â”‚  â”‚   requestDocs: (id, docs) => api.post(`/admin/kyc/${id}/request-docs`),â”‚    â”‚
â”‚  â”‚ }                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  HOOKS                                                                          â”‚
â”‚  â•â•â•â•â•â•                                                                         â”‚
â”‚                                                                                 â”‚
â”‚  src/hooks/useKYC.ts                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ export function useKYC() {                                             â”‚    â”‚
â”‚  â”‚   const { data: status, isLoading, refetch } = useQuery(               â”‚    â”‚
â”‚  â”‚     ['kyc-status'],                                                    â”‚    â”‚
â”‚  â”‚     () => kycService.getStatus()                                       â”‚    â”‚
â”‚  â”‚   );                                                                   â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   return {                                                             â”‚    â”‚
â”‚  â”‚     status,           // 'none' | 'pending' | 'approved' | etc         â”‚    â”‚
â”‚  â”‚     level,            // 'none' | 'basic' | 'intermediate' | etc       â”‚    â”‚
â”‚  â”‚     isVerified,       // boolean                                       â”‚    â”‚
â”‚  â”‚     isLoading,                                                         â”‚    â”‚
â”‚  â”‚     refetch,                                                           â”‚    â”‚
â”‚  â”‚     canAccess: (requiredLevel) => checkLevel(level, requiredLevel),    â”‚    â”‚
â”‚  â”‚   };                                                                   â”‚    â”‚
â”‚  â”‚ }                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  CONTEXTO GLOBAL                                                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                â”‚
â”‚                                                                                 â”‚
â”‚  src/contexts/KYCContext.tsx                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ // DisponÃ­vel em toda a aplicaÃ§Ã£o via Provider                         â”‚    â”‚
â”‚  â”‚ export const KYCContext = createContext<KYCContextType>(null);         â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ // Uso em qualquer componente:                                         â”‚    â”‚
â”‚  â”‚ const { kycLevel, isVerified, requireKYC } = useKYCContext();          â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ // requireKYC() abre modal se nÃ­vel insuficiente                       â”‚    â”‚
â”‚  â”‚ if (!requireKYC('intermediate')) return;                               â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### IntegraÃ§Ã£o com ServiÃ§os Externos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INTEGRAÃ‡Ã•ES EXTERNAS                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  1. AWS S3 (Storage de Documentos)                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                             â”‚
â”‚                                                                                 â”‚
â”‚  Bucket: wolknow-kyc-documents                                                  â”‚
â”‚  RegiÃ£o: sa-east-1 (SÃ£o Paulo)                                                  â”‚
â”‚  ConfiguraÃ§Ãµes:                                                                 â”‚
â”‚    â”œâ”€â”€ Acesso: Privado (sem acesso pÃºblico)                                     â”‚
â”‚    â”œâ”€â”€ Criptografia: AES-256 (SSE-S3)                                           â”‚
â”‚    â”œâ”€â”€ Versionamento: Habilitado                                                â”‚
â”‚    â””â”€â”€ Lifecycle: Mover para Glacier apÃ³s 1 ano                                 â”‚
â”‚                                                                                 â”‚
â”‚  Estrutura de pastas:                                                           â”‚
â”‚    s3://wolknow-kyc-documents/                                                  â”‚
â”‚    â””â”€â”€ {user_id}/                                                               â”‚
â”‚        â””â”€â”€ {verification_id}/                                                   â”‚
â”‚            â”œâ”€â”€ identity_front.jpg                                               â”‚
â”‚            â”œâ”€â”€ identity_back.jpg                                                â”‚
â”‚            â”œâ”€â”€ selfie.jpg                                                       â”‚
â”‚            â”œâ”€â”€ address_proof.pdf                                                â”‚
â”‚            â””â”€â”€ income_proof.pdf                                                 â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  2. SERPRO ou BigData Corp (ValidaÃ§Ã£o CPF)                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                      â”‚
â”‚                                                                                 â”‚
â”‚  SERPRO (Datavalid):                                                            â”‚
â”‚    URL: https://gateway.apiserpro.serpro.gov.br/datavalid/                      â”‚
â”‚    Endpoints:                                                                   â”‚
â”‚      POST /v3/validate/pf-face       â†’ ValidaÃ§Ã£o com biometria                  â”‚
â”‚      POST /v3/validate/pf            â†’ ValidaÃ§Ã£o bÃ¡sica                         â”‚
â”‚    Retorno:                                                                     â”‚
â”‚      {                                                                          â”‚
â”‚        "cpf_disponivel": true,                                                  â”‚
â”‚        "nome_similaridade": 0.95,                                               â”‚
â”‚        "data_nascimento": true,                                                 â”‚
â”‚        "situacao_cpf": "regular"                                                â”‚
â”‚      }                                                                          â”‚
â”‚                                                                                 â”‚
â”‚  BigData Corp (Alternativa):                                                    â”‚
â”‚    URL: https://api.bigdatacorp.com.br/                                         â”‚
â”‚    Vantagens: Mais dados, histÃ³rico de endereÃ§os, score de risco                â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  3. AWS Rekognition (Reconhecimento Facial)                                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                     â”‚
â”‚                                                                                 â”‚
â”‚  OperaÃ§Ãµes usadas:                                                              â”‚
â”‚    â”œâ”€â”€ CompareFaces         â†’ Compara selfie com foto do documento              â”‚
â”‚    â”‚   Retorno: similarity (0-100%)                                             â”‚
â”‚    â”‚   Threshold: > 90% para aprovar                                            â”‚
â”‚    â”‚                                                                            â”‚
â”‚    â”œâ”€â”€ DetectFaces          â†’ Detecta faces na imagem                           â”‚
â”‚    â”‚   Verifica: apenas 1 face, face centralizada                               â”‚
â”‚    â”‚                                                                            â”‚
â”‚    â””â”€â”€ DetectLabels         â†’ Detecta se Ã© foto de tela/papel                   â”‚
â”‚        Anti-spoofing bÃ¡sico                                                     â”‚
â”‚                                                                                 â”‚
â”‚  Liveness Detection (Prova de Vida):                                            â”‚
â”‚    OpÃ§Ã£o 1: AWS Rekognition Face Liveness                                       â”‚
â”‚    OpÃ§Ã£o 2: ImplementaÃ§Ã£o prÃ³pria (piscar, virar cabeÃ§a)                        â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  4. AWS Textract (OCR)                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                          â”‚
â”‚                                                                                 â”‚
â”‚  OperaÃ§Ãµes usadas:                                                              â”‚
â”‚    â”œâ”€â”€ AnalyzeID            â†’ Extrai dados de RG/CNH                            â”‚
â”‚    â”‚   Retorno: Nome, CPF, RG, Data Nascimento, Validade                        â”‚
â”‚    â”‚                                                                            â”‚
â”‚    â””â”€â”€ AnalyzeDocument      â†’ Extrai dados de comprovantes                      â”‚
â”‚        Retorno: EndereÃ§o, Data do documento                                     â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SeguranÃ§a e Conformidade (LGPD/Compliance)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SEGURANÃ‡A E CONFORMIDADE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  CRIPTOGRAFIA DE DADOS SENSÃVEIS                                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                â”‚
â”‚                                                                                 â”‚
â”‚  Dados que DEVEM ser criptografados (AES-256):                                  â”‚
â”‚    â”œâ”€â”€ CPF                                                                      â”‚
â”‚    â”œâ”€â”€ RG                                                                       â”‚
â”‚    â”œâ”€â”€ Telefone                                                                 â”‚
â”‚    â”œâ”€â”€ EndereÃ§o completo                                                        â”‚
â”‚    â””â”€â”€ Dados do SERPRO                                                          â”‚
â”‚                                                                                 â”‚
â”‚  ImplementaÃ§Ã£o:                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ from cryptography.fernet import Fernet                                 â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ class EncryptionService:                                               â”‚    â”‚
â”‚  â”‚   def __init__(self, key: str):                                        â”‚    â”‚
â”‚  â”‚     self.fernet = Fernet(key.encode())                                 â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   def encrypt(self, data: str) -> str:                                 â”‚    â”‚
â”‚  â”‚     return self.fernet.encrypt(data.encode()).decode()                 â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚   def decrypt(self, encrypted: str) -> str:                            â”‚    â”‚
â”‚  â”‚     return self.fernet.decrypt(encrypted.encode()).decode()            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  CONFORMIDADE LGPD                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                              â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Requisitos LGPD para KYC:                                              â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ 1. CONSENTIMENTO EXPLÃCITO                                             â”‚    â”‚
â”‚  â”‚    â–¡ Checkbox obrigatÃ³rio antes de iniciar KYC                         â”‚    â”‚
â”‚  â”‚    â–¡ Texto claro sobre coleta e uso dos dados                          â”‚    â”‚
â”‚  â”‚    â–¡ Registro de data/hora do consentimento                            â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ 2. FINALIDADE ESPECÃFICA                                               â”‚    â”‚
â”‚  â”‚    â–¡ Dados usados apenas para verificaÃ§Ã£o de identidade                â”‚    â”‚
â”‚  â”‚    â–¡ NÃ£o compartilhar com terceiros (exceto reguladores)               â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ 3. DIREITO Ã€ INFORMAÃ‡ÃƒO                                                â”‚    â”‚
â”‚  â”‚    â–¡ UsuÃ¡rio pode ver seus dados coletados                             â”‚    â”‚
â”‚  â”‚    â–¡ Endpoint: GET /kyc/my-data                                        â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ 4. DIREITO Ã€ EXCLUSÃƒO                                                  â”‚    â”‚
â”‚  â”‚    â–¡ UsuÃ¡rio pode solicitar exclusÃ£o (limitado por lei)                â”‚    â”‚
â”‚  â”‚    â–¡ Dados devem ser mantidos 5 anos por compliance                    â”‚    â”‚
â”‚  â”‚    â–¡ ApÃ³s 5 anos â†’ anonimizaÃ§Ã£o ou exclusÃ£o                            â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ 5. PORTABILIDADE                                                       â”‚    â”‚
â”‚  â”‚    â–¡ Exportar dados em formato estruturado (JSON/CSV)                  â”‚    â”‚
â”‚  â”‚    â–¡ Endpoint: GET /kyc/export                                         â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ 6. SEGURANÃ‡A                                                           â”‚    â”‚
â”‚  â”‚    â–¡ Criptografia em trÃ¢nsito (HTTPS/TLS 1.3)                          â”‚    â”‚
â”‚  â”‚    â–¡ Criptografia em repouso (AES-256)                                 â”‚    â”‚
â”‚  â”‚    â–¡ Logs de acesso aos dados                                          â”‚    â”‚
â”‚  â”‚    â–¡ Controle de acesso baseado em roles                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  AUDIT TRAIL (Trilha de Auditoria)                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                              â”‚
â”‚                                                                                 â”‚
â”‚  Todos os eventos devem ser logados:                                            â”‚
â”‚    â”œâ”€â”€ InÃ­cio de verificaÃ§Ã£o KYC                                                â”‚
â”‚    â”œâ”€â”€ Upload de cada documento                                                 â”‚
â”‚    â”œâ”€â”€ AlteraÃ§Ã£o de dados pessoais                                              â”‚
â”‚    â”œâ”€â”€ SubmissÃ£o para anÃ¡lise                                                   â”‚
â”‚    â”œâ”€â”€ VisualizaÃ§Ã£o de documento (admin)                                        â”‚
â”‚    â”œâ”€â”€ AprovaÃ§Ã£o/RejeiÃ§Ã£o                                                       â”‚
â”‚    â””â”€â”€ Download de dados (exportaÃ§Ã£o)                                           â”‚
â”‚                                                                                 â”‚
â”‚  Formato do log:                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ {                                                                      â”‚    â”‚
â”‚  â”‚   "timestamp": "2024-01-15T10:30:00Z",                                 â”‚    â”‚
â”‚  â”‚   "event_type": "kyc.document.uploaded",                               â”‚    â”‚
â”‚  â”‚   "actor_id": "user-uuid-123",                                         â”‚    â”‚
â”‚  â”‚   "actor_type": "user",                                                â”‚    â”‚
â”‚  â”‚   "verification_id": "kyc-uuid-456",                                   â”‚    â”‚
â”‚  â”‚   "details": {                                                         â”‚    â”‚
â”‚  â”‚     "document_type": "identity_front",                                 â”‚    â”‚
â”‚  â”‚     "file_hash": "sha256:abc123..."                                    â”‚    â”‚
â”‚  â”‚   },                                                                   â”‚    â”‚
â”‚  â”‚   "ip_address": "189.123.45.67",                                       â”‚    â”‚
â”‚  â”‚   "user_agent": "Mozilla/5.0..."                                       â”‚    â”‚
â”‚  â”‚ }                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  RETENÃ‡ÃƒO DE DADOS                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                              â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Tipo de Dado      â”‚ RetenÃ§Ã£o   â”‚ Motivo                          â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ KYC Aprovado      â”‚ 5 anos     â”‚ Compliance (BACEN/COAF)         â”‚          â”‚
â”‚  â”‚ KYC Rejeitado     â”‚ 2 anos     â”‚ AnÃ¡lise de fraude               â”‚          â”‚
â”‚  â”‚ Documentos (S3)   â”‚ 5 anos     â”‚ Compliance                      â”‚          â”‚
â”‚  â”‚ Logs de auditoria â”‚ 10 anos    â”‚ Compliance/Legal                â”‚          â”‚
â”‚  â”‚ Dados expirados   â”‚ Anonimizar â”‚ LGPD - minimizaÃ§Ã£o              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Estrutura de Arquivos Recomendada

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ESTRUTURA DE ARQUIVOS                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  BACKEND                                                                        â”‚
â”‚  â•â•â•â•â•â•â•                                                                        â”‚
â”‚                                                                                 â”‚
â”‚  Backend/                                                                       â”‚
â”‚  â””â”€â”€ app/                                                                       â”‚
â”‚      â”œâ”€â”€ models/                                                                â”‚
â”‚      â”‚   â”œâ”€â”€ kyc.py                    â† KYCVerification, KYCDocument,         â”‚
â”‚      â”‚   â”‚                               KYCPersonalData, KYCAuditLog          â”‚
â”‚      â”‚   â””â”€â”€ ...                                                               â”‚
â”‚      â”‚                                                                          â”‚
â”‚      â”œâ”€â”€ schemas/                                                               â”‚
â”‚      â”‚   â””â”€â”€ kyc.py                    â† Pydantic schemas:                      â”‚
â”‚      â”‚       â”œâ”€â”€ KYCStartRequest                                               â”‚
â”‚      â”‚       â”œâ”€â”€ KYCPersonalDataRequest                                        â”‚
â”‚      â”‚       â”œâ”€â”€ KYCDocumentResponse                                           â”‚
â”‚      â”‚       â”œâ”€â”€ KYCStatusResponse                                             â”‚
â”‚      â”‚       â””â”€â”€ KYCAdminListResponse                                          â”‚
â”‚      â”‚                                                                          â”‚
â”‚      â”œâ”€â”€ services/                                                              â”‚
â”‚      â”‚   â”œâ”€â”€ kyc_service.py            â† CRUD e lÃ³gica de negÃ³cio              â”‚
â”‚      â”‚   â”œâ”€â”€ serpro_service.py         â† IntegraÃ§Ã£o SERPRO/BigData             â”‚
â”‚      â”‚   â”œâ”€â”€ face_recognition_service.py â† AWS Rekognition                     â”‚
â”‚      â”‚   â”œâ”€â”€ ocr_service.py            â† AWS Textract                          â”‚
â”‚      â”‚   â”œâ”€â”€ s3_service.py             â† Upload/download documentos            â”‚
â”‚      â”‚   â””â”€â”€ encryption_service.py     â† Criptografia de dados sensÃ­veis       â”‚
â”‚      â”‚                                                                          â”‚
â”‚      â”œâ”€â”€ routers/                                                               â”‚
â”‚      â”‚   â”œâ”€â”€ kyc.py                    â† Endpoints do usuÃ¡rio                  â”‚
â”‚      â”‚   â””â”€â”€ admin/                                                             â”‚
â”‚      â”‚       â””â”€â”€ kyc_admin.py          â† Endpoints do admin                    â”‚
â”‚      â”‚                                                                          â”‚
â”‚      â”œâ”€â”€ core/                                                                  â”‚
â”‚      â”‚   â”œâ”€â”€ kyc_middleware.py         â† Decorator @require_kyc                â”‚
â”‚      â”‚   â””â”€â”€ kyc_config.py             â† ConfiguraÃ§Ãµes (nÃ­veis, limites)       â”‚
â”‚      â”‚                                                                          â”‚
â”‚      â””â”€â”€ tasks/                                                                 â”‚
â”‚          â””â”€â”€ kyc_tasks.py              â† Tarefas assÃ­ncronas (Celery)          â”‚
â”‚              â”œâ”€â”€ process_document_ocr                                          â”‚
â”‚              â”œâ”€â”€ validate_cpf_serpro                                           â”‚
â”‚              â””â”€â”€ send_kyc_notification                                         â”‚
â”‚                                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                                 â”‚
â”‚  FRONTEND                                                                       â”‚
â”‚  â•â•â•â•â•â•â•â•                                                                       â”‚
â”‚                                                                                 â”‚
â”‚  Frontend/src/                                                                  â”‚
â”‚  â”œâ”€â”€ pages/                                                                     â”‚
â”‚  â”‚   â”œâ”€â”€ kyc/                                                                   â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ KYCPage.tsx               â† Wizard de verificaÃ§Ã£o                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ KYCSuccessPage.tsx        â† Sucesso apÃ³s aprovaÃ§Ã£o                â”‚
â”‚  â”‚   â”‚   â””â”€â”€ KYCPendingPage.tsx        â† "Em anÃ¡lise"                          â”‚
â”‚  â”‚   â”‚                                                                          â”‚
â”‚  â”‚   â””â”€â”€ admin/                                                                 â”‚
â”‚  â”‚       â”œâ”€â”€ AdminKYCPage.tsx          â† Lista de KYCs                         â”‚
â”‚  â”‚       â””â”€â”€ AdminKYCDetailPage.tsx    â† Detalhes + aÃ§Ãµes                      â”‚
â”‚  â”‚                                                                              â”‚
â”‚  â”œâ”€â”€ components/                                                                â”‚
â”‚  â”‚   â””â”€â”€ kyc/                                                                   â”‚
â”‚  â”‚       â”œâ”€â”€ KYCStatusBadge.tsx        â† Badge de status                       â”‚
â”‚  â”‚       â”œâ”€â”€ KYCProgressBar.tsx        â† Progresso do wizard                   â”‚
â”‚  â”‚       â”œâ”€â”€ KYCDocumentUploader.tsx   â† Upload com preview                    â”‚
â”‚  â”‚       â”œâ”€â”€ KYCSelfieCapture.tsx      â† Captura via webcam                    â”‚
â”‚  â”‚       â”œâ”€â”€ KYCDocumentPreview.tsx    â† Preview de documento                  â”‚
â”‚  â”‚       â”œâ”€â”€ KYCRequiredModal.tsx      â† Modal "Complete KYC"                  â”‚
â”‚  â”‚       â””â”€â”€ KYCLevelInfo.tsx          â† Info sobre nÃ­veis                     â”‚
â”‚  â”‚                                                                              â”‚
â”‚  â”œâ”€â”€ services/                                                                  â”‚
â”‚  â”‚   â”œâ”€â”€ kyc.ts                        â† Chamadas API do usuÃ¡rio               â”‚
â”‚  â”‚   â””â”€â”€ admin/                                                                 â”‚
â”‚  â”‚       â””â”€â”€ adminKyc.ts               â† Chamadas API do admin                 â”‚
â”‚  â”‚                                                                              â”‚
â”‚  â”œâ”€â”€ hooks/                                                                     â”‚
â”‚  â”‚   â””â”€â”€ useKYC.ts                     â† Hook para status KYC                  â”‚
â”‚  â”‚                                                                              â”‚
â”‚  â”œâ”€â”€ contexts/                                                                  â”‚
â”‚  â”‚   â””â”€â”€ KYCContext.tsx                â† Contexto global KYC                   â”‚
â”‚  â”‚                                                                              â”‚
â”‚  â””â”€â”€ types/                                                                     â”‚
â”‚      â””â”€â”€ kyc.ts                        â† Interfaces TypeScript                 â”‚
â”‚          â”œâ”€â”€ KYCStatus                                                         â”‚
â”‚          â”œâ”€â”€ KYCLevel                                                          â”‚
â”‚          â”œâ”€â”€ KYCDocument                                                       â”‚
â”‚          â””â”€â”€ KYCVerification                                                   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cronograma de ImplementaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CRONOGRAMA DE IMPLEMENTAÃ‡ÃƒO                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  FASE 1: FUNDAÃ‡ÃƒO (Semana 1-2)                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â–¡ Criar modelos SQLAlchemy (kyc.py)                     [8h]           â”‚    â”‚
â”‚  â”‚ â–¡ Criar migration Alembic                               [2h]           â”‚    â”‚
â”‚  â”‚ â–¡ Criar schemas Pydantic                                [4h]           â”‚    â”‚
â”‚  â”‚ â–¡ Configurar bucket S3                                  [2h]           â”‚    â”‚
â”‚  â”‚ â–¡ Implementar S3Service                                 [4h]           â”‚    â”‚
â”‚  â”‚ â–¡ Implementar EncryptionService                         [4h]           â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ Entrega: Infraestrutura base pronta                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  FASE 2: BACKEND CORE (Semana 3-4)                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â–¡ Implementar KYCService (CRUD bÃ¡sico)                  [8h]           â”‚    â”‚
â”‚  â”‚ â–¡ Criar routers /kyc/*                                  [6h]           â”‚    â”‚
â”‚  â”‚ â–¡ Upload de documentos para S3                          [6h]           â”‚    â”‚
â”‚  â”‚ â–¡ Implementar @require_kyc middleware                   [4h]           â”‚    â”‚
â”‚  â”‚ â–¡ Testes unitÃ¡rios                                      [8h]           â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ Entrega: API funcional (sem integraÃ§Ãµes externas)                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  FASE 3: FRONTEND REFACTOR (Semana 5-6)                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â–¡ Refatorar KYCPage.tsx para usar API real              [12h]          â”‚    â”‚
â”‚  â”‚ â–¡ Criar kycService.ts                                   [4h]           â”‚    â”‚
â”‚  â”‚ â–¡ Implementar upload real de documentos                 [8h]           â”‚    â”‚
â”‚  â”‚ â–¡ Criar useKYC hook                                     [4h]           â”‚    â”‚
â”‚  â”‚ â–¡ Criar KYCContext                                      [4h]           â”‚    â”‚
â”‚  â”‚ â–¡ Criar KYCRequiredModal                                [4h]           â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ Entrega: Frontend conectado ao backend                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  FASE 4: INTEGRAÃ‡Ã•ES EXTERNAS (Semana 7-8)                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â–¡ Integrar SERPRO/BigData (validaÃ§Ã£o CPF)               [12h]          â”‚    â”‚
â”‚  â”‚ â–¡ Integrar AWS Textract (OCR)                           [8h]           â”‚    â”‚
â”‚  â”‚ â–¡ Integrar AWS Rekognition (face match)                 [12h]          â”‚    â”‚
â”‚  â”‚ â–¡ Implementar auto-aprovaÃ§Ã£o                            [6h]           â”‚    â”‚
â”‚  â”‚ â–¡ Testes de integraÃ§Ã£o                                  [8h]           â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ Entrega: VerificaÃ§Ã£o automÃ¡tica funcionando                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  FASE 5: ADMIN E COMPLIANCE (Semana 9-10)                                       â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â–¡ Criar routers /admin/kyc/*                            [6h]           â”‚    â”‚
â”‚  â”‚ â–¡ Criar AdminKYCPage (lista)                            [8h]           â”‚    â”‚
â”‚  â”‚ â–¡ Criar AdminKYCDetailPage (detalhes)                   [10h]          â”‚    â”‚
â”‚  â”‚ â–¡ Implementar audit trail                               [6h]           â”‚    â”‚
â”‚  â”‚ â–¡ Implementar exportaÃ§Ã£o LGPD                           [4h]           â”‚    â”‚
â”‚  â”‚ â–¡ Dashboard de estatÃ­sticas                             [6h]           â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ Entrega: Painel admin completo                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  FASE 6: INTEGRAÃ‡ÃƒO COM SERVIÃ‡OS (Semana 11-12)                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â–¡ Aplicar @require_kyc em Instant Trade                 [2h]           â”‚    â”‚
â”‚  â”‚ â–¡ Aplicar @require_kyc em WolkPay                       [2h]           â”‚    â”‚
â”‚  â”‚ â–¡ Aplicar @require_kyc em P2P                           [2h]           â”‚    â”‚
â”‚  â”‚ â–¡ Aplicar @require_kyc em Saques                        [2h]           â”‚    â”‚
â”‚  â”‚ â–¡ Implementar verificaÃ§Ã£o de limites                    [6h]           â”‚    â”‚
â”‚  â”‚ â–¡ Testes end-to-end                                     [8h]           â”‚    â”‚
â”‚  â”‚ â–¡ QA e ajustes finais                                   [8h]           â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚ Entrega: Sistema KYC completo em produÃ§Ã£o                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚
â”‚                                                                                 â”‚
â”‚  RESUMO DO CRONOGRAMA                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚  â”‚ Fase               â”‚ Semanasâ”‚ Horas   â”‚                                     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚
â”‚  â”‚ 1. FundaÃ§Ã£o        â”‚ 1-2    â”‚ ~24h    â”‚                                     â”‚
â”‚  â”‚ 2. Backend Core    â”‚ 3-4    â”‚ ~32h    â”‚                                     â”‚
â”‚  â”‚ 3. Frontend        â”‚ 5-6    â”‚ ~36h    â”‚                                     â”‚
â”‚  â”‚ 4. IntegraÃ§Ãµes     â”‚ 7-8    â”‚ ~46h    â”‚                                     â”‚
â”‚  â”‚ 5. Admin           â”‚ 9-10   â”‚ ~40h    â”‚                                     â”‚
â”‚  â”‚ 6. IntegraÃ§Ã£o      â”‚ 11-12  â”‚ ~30h    â”‚                                     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚
â”‚  â”‚ TOTAL              â”‚ 12 sem â”‚ ~208h   â”‚                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                                 â”‚
â”‚  * Estimativa considerando 1 desenvolvedor full-stack                          â”‚
â”‚  * Com equipe de 2 pessoas, tempo pode ser reduzido para 6-8 semanas           â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… O QUE JÃ EXISTE

### Frontend

#### 1. PÃ¡gina KYC BÃ¡sica (`/kyc`)

- [x] `Frontend/src/pages/kyc/KYCPage.tsx` - PÃ¡gina existe (586 linhas)
- [x] Rota configurada em `App.tsx`
- [x] UI com 5 steps de verificaÃ§Ã£o (mockado)
- [x] Componente de upload de arquivos (local, nÃ£o salva)
- [x] FormulÃ¡rio de informaÃ§Ãµes pessoais (mockado)
- [x] ExibiÃ§Ã£o de status por etapa
- [x] Design responsivo com dark mode
- [x] TraduÃ§Ãµes bÃ¡sicas (pt-BR e en-US)

#### 2. ReferÃªncias a KYC no Sistema

- [x] Link no `ProfilePage.tsx` â†’ `/kyc`
- [x] Link no `ServicesPage.tsx` â†’ `/kyc`
- [x] Badge "KYC Verificado" no P2P
- [x] Campo `kyc_status` no `AdminUserDetailPage.tsx`

### Backend

#### 1. NotificaÃ§Ãµes Admin

- [x] Query para buscar usuÃ¡rios com KYC pendente (`admin_notification_service.py`)
- [x] NotificaÃ§Ã£o de KYC pendente para admin

---

## âŒ O QUE FALTA IMPLEMENTAR

### ğŸ”´ BACKEND - Prioridade ALTA

#### 1. Modelo de Dados (Database)

- [ ] Criar modelo `KYCVerification` em `app/models/kyc.py`

  ```python
  class KYCVerification:
      id: UUID
      user_id: UUID (FK â†’ users)
      status: Enum (pending, submitted, under_review, approved, rejected, expired)
      level: Enum (basic, intermediate, advanced)
      submitted_at: DateTime
      reviewed_at: DateTime
      reviewed_by: UUID (FK â†’ users)
      rejection_reason: String
      expiration_date: DateTime
      created_at: DateTime
      updated_at: DateTime
  ```

- [ ] Criar modelo `KYCDocument` em `app/models/kyc.py`

  ```python
  class KYCDocument:
      id: UUID
      verification_id: UUID (FK â†’ kyc_verifications)
      document_type: Enum (identity_front, identity_back, selfie, address_proof, income_proof)
      file_path: String (S3 URL)
      file_hash: String (SHA256)
      original_filename: String
      mime_type: String
      file_size: Integer
      status: Enum (pending, approved, rejected)
      rejection_reason: String
      ocr_data: JSON (dados extraÃ­dos)
      face_match_score: Float
      uploaded_at: DateTime
  ```

- [ ] Criar modelo `KYCPersonalData` em `app/models/kyc.py`

  ```python
  class KYCPersonalData:
      id: UUID
      verification_id: UUID (FK â†’ kyc_verifications)
      # Dados Pessoais
      full_name: String
      social_name: String (opcional)
      birth_date: Date
      nationality: String
      document_type: Enum (cpf, cnpj)
      document_number: String (encrypted)
      rg_number: String (encrypted)
      # EndereÃ§o
      zip_code: String
      street: String
      number: String
      complement: String
      neighborhood: String
      city: String
      state: String
      country: String
      # Contato
      phone: String (encrypted)
      email: String
      # InformaÃ§Ãµes Financeiras
      occupation: String
      monthly_income_range: Enum
      source_of_funds: Enum (salary, business, investments, inheritance, other)
      pep: Boolean (Pessoa Politicamente Exposta)
      fatca: Boolean (cidadÃ£o/residente EUA)
      # Dados validados externamente
      cpf_validated: Boolean
      cpf_validation_date: DateTime
      serpro_data: JSON
  ```

- [ ] Criar modelo `KYCAuditLog` em `app/models/kyc.py`

  ```python
  class KYCAuditLog:
      id: UUID
      verification_id: UUID
      actor_id: UUID
      actor_type: Enum (user, admin, system, api)
      action: String
      old_status: String
      new_status: String
      details: JSON
      ip_address: String
      user_agent: String
      created_at: DateTime
  ```

- [ ] Criar migration Alembic para tabelas KYC

#### 2. ServiÃ§o KYC (`app/services/kyc_service.py`)

- [ ] `create_verification()` - Inicia processo KYC
- [ ] `get_verification()` - Busca status atual
- [ ] `upload_document()` - Upload de documento com validaÃ§Ã£o
- [ ] `save_personal_data()` - Salva dados pessoais
- [ ] `submit_for_review()` - Submete para anÃ¡lise
- [ ] `approve_verification()` - Admin aprova
- [ ] `reject_verification()` - Admin rejeita
- [ ] `request_additional_documents()` - Pede mais docs
- [ ] `validate_cpf_serpro()` - Valida CPF na Receita/Serpro
- [ ] `check_expiration()` - Verifica expiraÃ§Ã£o
- [ ] `get_user_kyc_level()` - Retorna nÃ­vel atual do usuÃ¡rio

#### 3. Router/API KYC (`app/routers/kyc.py`)

- [ ] `POST /kyc/start` - Inicia verificaÃ§Ã£o KYC
- [ ] `GET /kyc/status` - Status atual do KYC
- [ ] `POST /kyc/documents` - Upload de documento
- [ ] `DELETE /kyc/documents/{id}` - Remove documento
- [ ] `POST /kyc/personal-data` - Salva dados pessoais
- [ ] `POST /kyc/submit` - Submete para anÃ¡lise
- [ ] `GET /kyc/requirements` - Requisitos por nÃ­vel

#### 4. Router Admin KYC (`app/routers/admin/kyc_admin.py`)

- [ ] `GET /admin/kyc` - Lista verificaÃ§Ãµes pendentes
- [ ] `GET /admin/kyc/{id}` - Detalhes de uma verificaÃ§Ã£o
- [ ] `POST /admin/kyc/{id}/approve` - Aprovar KYC
- [ ] `POST /admin/kyc/{id}/reject` - Rejeitar KYC
- [ ] `POST /admin/kyc/{id}/request-documents` - Pedir mais docs
- [ ] `GET /admin/kyc/stats` - EstatÃ­sticas de KYC
- [ ] `GET /admin/kyc/export` - Exportar relatÃ³rio

#### 5. Schemas Pydantic (`app/schemas/kyc.py`)

- [ ] `KYCStatusResponse`
- [ ] `KYCDocumentUploadRequest`
- [ ] `KYCPersonalDataRequest`
- [ ] `KYCVerificationResponse`
- [ ] `KYCAdminListResponse`
- [ ] `KYCApprovalRequest`
- [ ] `KYCRejectionRequest`

---

### ğŸ”´ FRONTEND - Prioridade ALTA

#### 1. ServiÃ§o KYC (`src/services/kyc.ts`)

- [ ] `startVerification()` - Inicia KYC
- [ ] `getStatus()` - Busca status
- [ ] `uploadDocument()` - Upload de arquivo
- [ ] `deleteDocument()` - Remove documento
- [ ] `savePersonalData()` - Salva dados
- [ ] `submitForReview()` - Submete
- [ ] `getRequirements()` - Requisitos

#### 2. PÃ¡gina KYC Conectada ao Backend

- [ ] Integrar com API real (atualmente mockado)
- [ ] Upload de arquivos para S3/storage
- [ ] ValidaÃ§Ã£o de CPF em tempo real
- [ ] Consulta de CEP via ViaCEP
- [ ] Preview de imagens antes do upload
- [ ] CompressÃ£o de imagens
- [ ] ValidaÃ§Ã£o de tamanho/formato de arquivo
- [ ] Barra de progresso de upload
- [ ] Mensagens de erro do backend

#### 3. Componentes Adicionais

- [ ] `KYCDocumentUploader` - Componente de upload especÃ­fico
- [ ] `KYCSelfieCapture` - Captura de selfie com cÃ¢mera
- [ ] `KYCStatusBadge` - Badge de status reutilizÃ¡vel
- [ ] `KYCProgressIndicator` - Indicador de progresso
- [ ] `KYCDocumentPreview` - Preview de documento

#### 4. Hooks

- [ ] `useKYCStatus()` - Hook para status KYC
- [ ] `useDocumentUpload()` - Hook para upload

---

### ğŸ”´ ADMIN - Prioridade MÃ‰DIA

#### 1. PÃ¡gina Admin KYC (`src/pages/admin/AdminKYCPage.tsx`)

- [ ] Lista de verificaÃ§Ãµes pendentes
- [ ] Filtros por status, data, nÃ­vel
- [ ] Busca por usuÃ¡rio
- [ ] AÃ§Ãµes em lote

#### 2. PÃ¡gina Detalhe KYC (`src/pages/admin/AdminKYCDetailPage.tsx`)

- [ ] VisualizaÃ§Ã£o de todos os documentos
- [ ] ComparaÃ§Ã£o facial (selfie vs documento)
- [ ] Dados pessoais completos
- [ ] HistÃ³rico de aÃ§Ãµes
- [ ] BotÃµes: Aprovar / Rejeitar / Pedir mais docs
- [ ] Campo de motivo de rejeiÃ§Ã£o
- [ ] ValidaÃ§Ã£o SERPRO inline

#### 3. ServiÃ§os Admin

- [ ] `src/services/admin/adminKyc.ts`

---

### ğŸ”´ INTEGRAÃ‡Ã•ES EXTERNAS - Prioridade ALTA

#### 1. ValidaÃ§Ã£o de CPF/CNPJ

- [ ] IntegraÃ§Ã£o com SERPRO (Receita Federal)
- [ ] Ou BigData Corp
- [ ] Ou Nubax
- [ ] Verificar situaÃ§Ã£o cadastral
- [ ] Verificar nome completo
- [ ] Verificar data de nascimento

#### 2. OCR de Documentos

- [ ] IntegraÃ§Ã£o com AWS Textract
- [ ] Ou Google Vision API
- [ ] Ou Microsoft Azure Computer Vision
- [ ] ExtraÃ§Ã£o automÃ¡tica de dados do RG/CNH
- [ ] ValidaÃ§Ã£o de documento nÃ£o adulterado

#### 3. Reconhecimento Facial

- [ ] IntegraÃ§Ã£o com AWS Rekognition
- [ ] Ou Face++
- [ ] Ou BioPass ID
- [ ] ComparaÃ§Ã£o selfie vs foto documento
- [ ] Liveness detection (prova de vida)
- [ ] Anti-spoofing

#### 4. Consulta de EndereÃ§o

- [ ] IntegraÃ§Ã£o com ViaCEP (jÃ¡ pode existir parcialmente)
- [ ] ValidaÃ§Ã£o de endereÃ§o

---

### ğŸ”´ ARMAZENAMENTO DE DOCUMENTOS - Prioridade ALTA

#### 1. Storage de Arquivos

- [ ] Configurar AWS S3 ou similar
- [ ] Bucket privado para documentos KYC
- [ ] Criptografia em repouso
- [ ] Presigned URLs para acesso temporÃ¡rio
- [ ] PolÃ­tica de retenÃ§Ã£o (LGPD)

#### 2. SeguranÃ§a de Dados

- [ ] Criptografia de dados sensÃ­veis no banco (CPF, RG)
- [ ] Mascaramento em logs
- [ ] Controle de acesso por role

---

### ğŸŸ¡ NOTIFICAÃ‡Ã•ES - Prioridade MÃ‰DIA

#### 1. NotificaÃ§Ãµes para UsuÃ¡rio

- [ ] Email: KYC submetido
- [ ] Email: KYC aprovado
- [ ] Email: KYC rejeitado (com motivo)
- [ ] Email: Documentos adicionais necessÃ¡rios
- [ ] Email: KYC expirando
- [ ] Push notification mobile

#### 2. NotificaÃ§Ãµes para Admin

- [x] NotificaÃ§Ã£o de KYC pendente (parcial)
- [ ] Email diÃ¡rio com resumo
- [ ] Alerta de acÃºmulo de pendÃªncias

---

### ğŸŸ¡ COMPLIANCE / LGPD - Prioridade ALTA

#### 1. LGPD

- [ ] Termo de consentimento para coleta de dados
- [ ] OpÃ§Ã£o de exclusÃ£o de dados (direito ao esquecimento)
- [ ] RelatÃ³rio de dados do titular
- [ ] Log de consentimento

#### 2. AML (Anti-Money Laundering)

- [ ] VerificaÃ§Ã£o em listas restritivas (OFAC, PEP)
- [ ] Scoring de risco
- [ ] Alertas automÃ¡ticos para operaÃ§Ãµes suspeitas

---

## ğŸ“Š NÃVEIS DE KYC SUGERIDOS

| NÃ­vel             | Requisitos                               | Limites        |
| ----------------- | ---------------------------------------- | -------------- |
| **BÃ¡sico**        | Email + Celular verificado               | R$ 1.000/mÃªs   |
| **IntermediÃ¡rio** | CPF + Selfie + Dados pessoais            | R$ 50.000/mÃªs  |
| **AvanÃ§ado**      | RG/CNH + Comprovante endereÃ§o + Renda    | R$ 300.000/mÃªs |
| **Premium**       | Contrato fÃ­sico + VerificaÃ§Ã£o presencial | Sem limite     |

---

## ğŸš€ PLANO DE IMPLEMENTAÃ‡ÃƒO SUGERIDO

### Fase 1 - MVP (2-3 semanas)

1. âœ… Backend: Modelos de dados
2. âœ… Backend: Migration do banco
3. âœ… Backend: CRUD bÃ¡sico (service + router)
4. âœ… Frontend: Conectar pÃ¡gina existente ao backend
5. âœ… Frontend: Upload funcional de documentos
6. âœ… Admin: Lista de KYCs pendentes
7. âœ… Admin: Aprovar/Rejeitar manual

### Fase 2 - ValidaÃ§Ãµes (2-3 semanas)

1. âœ… IntegraÃ§Ã£o SERPRO ou BigData para CPF
2. âœ… OCR bÃ¡sico para extraÃ§Ã£o de dados
3. âœ… ComparaÃ§Ã£o facial bÃ¡sica
4. âœ… NotificaÃ§Ãµes por email
5. âœ… Logs de auditoria

### Fase 3 - AutomaÃ§Ã£o (2-3 semanas)

1. âœ… Auto-aprovaÃ§Ã£o para KYC simples
2. âœ… Liveness detection
3. âœ… VerificaÃ§Ã£o em listas restritivas
4. âœ… Dashboard de mÃ©tricas KYC
5. âœ… RelatÃ³rios de compliance

### Fase 4 - Compliance Total (2-3 semanas)

1. âœ… LGPD completo
2. âœ… IntegraÃ§Ã£o AML
3. âœ… Auditoria externa
4. âœ… DocumentaÃ§Ã£o legal

---

## ğŸ’° ESTIMATIVA DE CUSTOS MENSAIS (APIs)

| ServiÃ§o            | Estimativa             | ObservaÃ§Ã£o            |
| ------------------ | ---------------------- | --------------------- |
| AWS S3             | R$ 50-200              | Documentos            |
| SERPRO/BigData     | R$ 0.50-2.00/consulta  | ~500 users = R$ 1.000 |
| AWS Rekognition    | R$ 0.001/imagem        | ~2.000 imagens = R$ 2 |
| AWS Textract       | R$ 0.0015/pÃ¡gina       | ~1.000 docs = R$ 1.50 |
| **Total estimado** | **R$ 1.000-2.000/mÃªs** | Para ~500 novos KYCs  |

---

## ğŸ“ ESTRUTURA DE ARQUIVOS SUGERIDA

```
Backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ kyc.py                    ğŸ”´ CRIAR
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â””â”€â”€ kyc.py                    ğŸ”´ CRIAR
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ kyc_service.py            ğŸ”´ CRIAR
â”‚   â”‚   â””â”€â”€ serpro_service.py         ğŸ”´ CRIAR (ou bigdata)
â”‚   â”‚   â””â”€â”€ ocr_service.py            ğŸ”´ CRIAR
â”‚   â”‚   â””â”€â”€ face_recognition_service.py ğŸ”´ CRIAR
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ kyc.py                    ğŸ”´ CRIAR
â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚       â””â”€â”€ kyc_admin.py          ğŸ”´ CRIAR
â”‚   â””â”€â”€ core/
â”‚       â””â”€â”€ s3.py                     ğŸ”´ CRIAR (storage)

Frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ kyc/
â”‚   â”‚   â”‚   â””â”€â”€ KYCPage.tsx           âœ… EXISTE (melhorar)
â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚       â”œâ”€â”€ AdminKYCPage.tsx      ğŸ”´ CRIAR
â”‚   â”‚       â””â”€â”€ AdminKYCDetailPage.tsx ğŸ”´ CRIAR
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ kyc.ts                    ğŸ”´ CRIAR
â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚       â””â”€â”€ adminKyc.ts           ğŸ”´ CRIAR
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ kyc/
â”‚           â”œâ”€â”€ KYCDocumentUploader.tsx ğŸ”´ CRIAR
â”‚           â”œâ”€â”€ KYCSelfieCapture.tsx    ğŸ”´ CRIAR
â”‚           â””â”€â”€ KYCStatusBadge.tsx      ğŸ”´ CRIAR
```

---

## ï¿½ INTEGRAÃ‡ÃƒO KYC COM CADA SERVIÃ‡O

### ğŸ”´ Instant Trade (`instant_trade_service.py`)

- [ ] Verificar nÃ­vel KYC antes de criar trade
- [ ] Bloquear se KYC nÃ£o atende requisito mÃ­nimo
- [ ] Verificar limites diÃ¡rios/mensais por nÃ­vel KYC
- [ ] Exibir modal de "Complete seu KYC" no frontend
- [ ] Log de tentativas bloqueadas por KYC

**Arquivos a modificar:**

```
Backend:
- app/routers/instant_trade.py â†’ adicionar verificaÃ§Ã£o KYC
- app/services/instant_trade_service.py â†’ check_kyc_level()

Frontend:
- src/pages/trading/InstantTradePage.tsx â†’ verificar KYC antes de exibir
- src/components/KYCRequiredModal.tsx â†’ modal de redirecionamento
```

### ğŸ”´ WolkPay (`wolkpay_service.py`)

- [ ] Verificar KYC do beneficiÃ¡rio ao criar fatura
- [ ] Definir limites por operaÃ§Ã£o baseado no nÃ­vel KYC
- [ ] Bloquear criaÃ§Ã£o de fatura se KYC insuficiente
- [ ] Exibir badge de "BeneficiÃ¡rio Verificado" no checkout

**Arquivos a modificar:**

```
Backend:
- app/services/wolkpay_service.py â†’ verificar KYC do beneficiÃ¡rio
- app/routers/wolkpay.py â†’ validaÃ§Ã£o antes de criar invoice

Frontend:
- src/pages/wolkpay/WolkPayPage.tsx â†’ bloquear se KYC insuficiente
- src/pages/wolkpay/WolkPayCheckoutPage.tsx â†’ exibir nÃ­vel KYC do beneficiÃ¡rio
```

### ğŸ”´ P2P Trading (`p2p/`)

- [ ] Verificar KYC ao criar ordem de compra/venda
- [ ] Mostrar badge de verificaÃ§Ã£o no perfil do trader
- [ ] Definir limites de operaÃ§Ã£o por nÃ­vel KYC
- [ ] Exigir KYC mÃ­nimo para disputas

**Arquivos a modificar:**

```
Backend:
- app/routers/p2p.py â†’ verificar KYC antes de criar ordem
- app/services/p2p/ â†’ adicionar check de nÃ­vel

Frontend:
- src/pages/p2p/P2PPage.tsx â†’ verificar KYC
- src/pages/p2p/CreateOrderPage.tsx â†’ bloquear se KYC insuficiente
- src/components/trader/TraderProfileCard.tsx â†’ exibir badge KYC
```

### ğŸ”´ Saques Crypto (`blockchain_withdraw_service.py`)

- [ ] Verificar KYC antes de processar saque
- [ ] Definir limites diÃ¡rios por nÃ­vel KYC
- [ ] Alertar admin para saques de usuÃ¡rios com KYC bÃ¡sico

**Arquivos a modificar:**

```
Backend:
- app/services/blockchain_withdraw_service.py â†’ check KYC
- app/routers/wallet.py â†’ validaÃ§Ã£o antes de saque

Frontend:
- src/pages/wallet/SendPage.tsx â†’ verificar KYC
```

### ğŸ”´ Bank Transfer / PIX (`bank_transfer_service.py`)

- [ ] Exigir KYC intermediÃ¡rio para saques fiat
- [ ] Verificar se conta bancÃ¡ria pertence ao usuÃ¡rio (mesma titularidade)
- [ ] Limites de saque por nÃ­vel KYC

**Arquivos a modificar:**

```
Backend:
- app/services/bank_transfer_service.py â†’ verificar KYC e titularidade
- app/routers/bank_transfer_payments.py â†’ validaÃ§Ã£o

Frontend:
- src/pages/wallet/WithdrawPage.tsx â†’ verificar KYC
```

### ğŸ”´ TransferÃªncias Internas (`wallet_service.py`)

- [ ] Verificar KYC para transferÃªncias entre usuÃ¡rios
- [ ] Limites por nÃ­vel KYC
- [ ] Log de transferÃªncias para compliance

**Arquivos a modificar:**

```
Backend:
- app/services/wallet_service.py â†’ check KYC
- app/routers/wallet.py â†’ validaÃ§Ã£o
```

---

## ğŸ›¡ï¸ MIDDLEWARE DE KYC (SUGERIDO)

Criar um middleware/decorator reutilizÃ¡vel para validar KYC em qualquer endpoint:

```python
# app/core/kyc_middleware.py

from functools import wraps
from fastapi import HTTPException, status

def require_kyc(min_level: str = "basic"):
    """
    Decorator para exigir nÃ­vel mÃ­nimo de KYC

    NÃ­veis: "none", "basic", "intermediate", "advanced", "premium"

    Uso:
        @require_kyc("intermediate")
        async def create_wolkpay_invoice(...):
            ...
    """
    def decorator(func):
        @wraps(func)
        async def wrapper(*args, **kwargs):
            # Extrair user_id do contexto
            user_id = kwargs.get('current_user', {}).get('id')
            db = kwargs.get('db')

            # Verificar nÃ­vel KYC
            kyc_service = KYCService(db)
            user_kyc_level = await kyc_service.get_user_kyc_level(user_id)

            level_hierarchy = {
                "none": 0,
                "basic": 1,
                "intermediate": 2,
                "advanced": 3,
                "premium": 4
            }

            if level_hierarchy.get(user_kyc_level, 0) < level_hierarchy.get(min_level, 0):
                raise HTTPException(
                    status_code=status.HTTP_403_FORBIDDEN,
                    detail={
                        "error": "kyc_required",
                        "message": f"Esta operaÃ§Ã£o requer KYC nÃ­vel '{min_level}'",
                        "current_level": user_kyc_level,
                        "required_level": min_level,
                        "redirect_url": "/kyc"
                    }
                )

            return await func(*args, **kwargs)
        return wrapper
    return decorator
```

### Uso em Routers:

```python
# app/routers/instant_trade.py

@router.post("/instant-trade")
@require_kyc("basic")  # Exige KYC bÃ¡sico
async def create_instant_trade(...):
    ...

# app/routers/wolkpay.py

@router.post("/wolkpay/invoices")
@require_kyc("intermediate")  # Exige KYC intermediÃ¡rio
async def create_wolkpay_invoice(...):
    ...

# app/routers/bank_transfer.py

@router.post("/bank-transfer/withdraw")
@require_kyc("intermediate")  # Exige KYC intermediÃ¡rio para saque fiat
async def create_bank_withdraw(...):
    ...
```

---

## ï¿½ğŸ“ PRÃ“XIMOS PASSOS IMEDIATOS

1. **Decidir provedor de validaÃ§Ã£o de CPF** (SERPRO vs BigData)
2. **Decidir provedor de OCR** (AWS vs Google vs Azure)
3. **Decidir provedor de face recognition** (AWS vs Face++)
4. **Criar tabelas no banco** (migration)
5. **Implementar backend bÃ¡sico** (model, service, router)
6. **Conectar frontend existente**
7. **Criar middleware `@require_kyc`**
8. **Integrar KYC em cada serviÃ§o**

---

_Ãšltima atualizaÃ§Ã£o: 11 de Janeiro de 2026_
_VersÃ£o: 1.1_
